[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
# Core dependencies
flask = "==2.3.*"
gunicorn = "==20.1.*"
deepface = "==0.0.*"
pymongo = "==4.3.*"
python-dotenv = "==1.0.*"
opencv-python = "==4.7.*"

# Deep learning backend
tf_keras = "==2.15.*"  # TensorFlow/Keras stable release
protobuf = "==3.20.*"  # Required for TF compatibility

# Optional backends (choose one)
retina-face = {version = "==0.0.*", markers = "extra == 'retinaface'"}
mtcnn = {version = "==0.1.*", markers = "extra == 'mtcnn'"}
dlib = {version = "==19.24.*", markers = "extra == 'dlib'"}

[dev-packages]
pytest = "==7.4.*"
pytest-cov = "==4.1.*"
black = "==23.7.*"
flake8 = "==6.0.*"
mypy = "==1.5.*"
types-pymongo = "==4.3.*"
types-python-dotenv = "==1.0.*"
jupyter = "==1.0.*"  # For model experimentation

[requires]
python_version = "3.10"

[scripts]
start = "gunicorn --bind 0.0.0.0:5000 app:app --timeout 120"
test = "pytest tests/ -v --cov=src"
lint = "flake8 src && black --check src"
format = "black src"
typecheck = "mypy src"
notebook = "jupyter notebook --ip=0.0.0.0 --port=8888 --no-browser --allow-root"